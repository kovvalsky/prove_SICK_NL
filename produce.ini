
[SICK_NL/anno/spacy_%{size}.json]
cond = %{ size in ('sm', 'md', 'lg') }
dep.raw = SICK_NL/raw.spl
dep.py = python/spacy_lex_anno.py
recipe =
    python3 %{py} -s %{size} %{raw} %{target}

[SICK_NL/anno_terms/%{parser}.%{anno}.pl]
dep.anno = SICK_NL/anno/%{anno}.json
dep.parser = SICK_NL/parses/%{parser}.pl
dep.sen = SICK_NL/sen.pl
dep.prolog = prolog/tlg_to_tt.pl
recipe =
    swipl -g "write_anno_tts('%{target}', '%{anno}'), halt" -t halt -f %{prolog} -l %{parser} %{sen}

[SICK_NL/latex/%{parser}.%{anno}.%{part}.tex]
dep.anno = SICK_NL/anno/%{anno}.json
dep.parser = SICK_NL/parses/%{parser}.pl
dep.sen = SICK_NL/sen.pl
dep.main = prolog/main.pl
filter = %{ "[]" if part == 'all' else "['{}']".format(part.upper()) }
recipe =
    swipl -g "tlg_ids_to_latex('%{anno}', %{filter}, '%{target}'), halt" -t halt -f %{main} -l %{parser} %{sen}

[SICK_NL/latex/%{filename}.pdf]
dep.tex = SICK_NL/latex/%{filename}.tex
recipe =
    hash_extra=5000000 max_strings=5000000 lualatex --output-directory=SICK_NL/latex/ %{tex}
    rm SICK_NL/latex/%{filename}.{log,aux}
